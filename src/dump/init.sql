CREATE DATABASE IF NOT EXISTS db_todo_list;

USE db_todo_list;

CREATE TABLE IF NOT EXISTS tbl_tag
(
    ID     SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    NAME       VARCHAR(255) NOT NULL,
    SLUG      VARCHAR(255) NOT NULL,
    DESCRIPTION   VARCHAR(500) DEFAULT NULL,
    STATUS TINYINT(1) DEFAULT 1, -- STATUS DA TAG (ATIVA/INATIVA),
    COLOR         VARCHAR(7) DEFAULT '#FFFFFF',
    CREATED_AT DATETIME     NOT NULL,
    UPDATED_AT DATETIME     NOT NULL
);

CREATE TABLE IF NOT EXISTS tbl_category
(
    ID SMALLINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    NAME        VARCHAR(255) NOT NULL,
    CREATED_AT  DATETIME     NOT NULL,
    UPDATED_AT  DATETIME     NOT NULL
);

CREATE TABLE IF NOT EXISTS tbl_todo
(
    ID      INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    TITLE        VARCHAR(255)      NOT NULL,
    DESCRIPTION  TEXT              NOT NULL,
    IS_COMPLETED BOOLEAN           NOT NULL,
    CREATED_AT   DATETIME          NOT NULL,
    STATUS TINYINT(1) DEFAULT 1, -- STATUS DA TAG (ATIVA/INATIVA),
    UPDATED_AT   DATETIME          NOT NULL,
    ID_TAG       SMALLINT UNSIGNED NULL, 
    ID_CATEGORY  SMALLINT UNSIGNED NULL, 
    CONSTRAINT fk_id_tag FOREIGN KEY (ID_Tag) REFERENCES tbl_tag (ID)
        ON DELETE SET NULL
        ON UPDATE CASCADE,
    CONSTRAINT fk_id_Category FOREIGN KEY (ID_Category) REFERENCES tbl_category (ID)
        ON DELETE SET NULL
        ON UPDATE CASCADE
);
